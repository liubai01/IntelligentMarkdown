# Lua Wizard â€” å¤šæ­¥ä»£ç ç”Ÿæˆå‘å¯¼

## æ¦‚è¿°

`lua-wizard` æ˜¯ä¸€ç§åµŒå…¥åœ¨ Markdown ä¸­çš„ä»£ç å—è¯­æ³•ï¼Œç”¨äºå®šä¹‰**å¤šæ­¥å‘å¯¼**ï¼ˆWizardï¼‰ï¼Œå¼•å¯¼ç”¨æˆ·é€šè¿‡äº¤äº’å¼è¡¨å•æ”¶é›†å‚æ•°ï¼Œå¹¶æ ¹æ®ä»£ç æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆ Lua ä»£ç ï¼Œæ’å…¥åˆ°ç›®æ ‡ Lua æ–‡ä»¶çš„æŒ‡å®šè¡¨ä¸­ã€‚

**å…¸å‹ç”¨é€”**ï¼šæ¸¸æˆç­–åˆ’é€šè¿‡å¡«å†™è¡¨å•å¿«é€Ÿåˆ›å»ºæ–°æ­¦å™¨ã€æ–°ç‰©å“ã€æ–°ä»»åŠ¡ç­‰æ•°æ®æ¡ç›®ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¾‘ Lua ä»£ç ã€‚

---

## å¿«é€Ÿå¼€å§‹

### 1. åœ¨ Markdown ä¸­å®šä¹‰å‘å¯¼

åœ¨ä½ çš„ `.config.md` æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å—ï¼š

````markdown
```lua-wizard
file: ./items_config.lua
target: ItemsConfig.Weapons
action: append
label: åˆ›å»ºæ–°æ­¦å™¨
icon: âš”ï¸
template: |
  { id = {{id}}, name = "{{name}}", attack = {{attack}}, price = {{price}}, stackable = {{stackable}} }
steps:
  - field: id
    label: æ­¦å™¨ ID
    type: number
    default: 1005
    description: å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆéœ€å¤§äº 1000ï¼‰
    min: 1001
  - field: name
    label: æ­¦å™¨åç§°
    type: string
    default: æ–°æ­¦å™¨
    description: æ¸¸æˆå†…æ˜¾ç¤ºåç§°
  - field: attack
    label: æ”»å‡»åŠ›
    type: number
    default: 50
    min: 1
    max: 999
  - field: price
    label: ä»·æ ¼ï¼ˆé‡‘å¸ï¼‰
    type: number
    default: 100
    min: 0
  - field: stackable
    label: å¯å åŠ 
    type: boolean
    default: false
    description: èƒŒåŒ…ä¸­æ˜¯å¦å¯ä»¥å †å 
```
````

### 2. æ‰“å¼€é¢„è§ˆé¢æ¿

ç”¨ `config.md` é¢„è§ˆç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰æ­¥éª¤æŒ‡ç¤ºå™¨çš„äº¤äº’å¼å‘å¯¼å¡ç‰‡ã€‚

### 3. é€æ­¥å¡«å†™å‚æ•°

æ¯ä¸ªæ­¥éª¤å¯¹åº”ä¸€ä¸ªè¾“å…¥å­—æ®µï¼Œç‚¹å‡» **ä¸‹ä¸€æ­¥** / **ä¸Šä¸€æ­¥** è¿›è¡Œå¯¼èˆªã€‚

### 4. é¢„è§ˆå¹¶ç¡®è®¤

åœ¨æœ€åä¸€æ­¥ç‚¹å‡» **åˆ›å»º** åï¼Œä¼šæ˜¾ç¤ºç”Ÿæˆçš„ä»£ç é¢„è§ˆã€‚ç¡®è®¤æ— è¯¯åç‚¹å‡» **ç¡®è®¤ & æ’å…¥**ï¼Œä»£ç å°†è‡ªåŠ¨æ’å…¥åˆ°ç›®æ ‡ Lua è¡¨ä¸­ã€‚

---

## è¯­æ³•å‚è€ƒ

### é¡¶å±‚å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `file` | string | âœ… | ç›®æ ‡ Lua æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äº Markdown æ–‡ä»¶ï¼‰ |
| `target` | string | âœ… | è¦æ’å…¥çš„ Lua è¡¨è·¯å¾„ï¼Œå¦‚ `ItemsConfig.Weapons` |
| `action` | string | å¦ | æ“ä½œç±»å‹ï¼Œç›®å‰ä»…æ”¯æŒ `append`ï¼ˆè¿½åŠ åˆ°è¡¨æœ«å°¾ï¼Œé»˜è®¤å€¼ï¼‰ |
| `label` | string | å¦ | å‘å¯¼æ ‡é¢˜ï¼ˆæ˜¾ç¤ºåœ¨é¡¶éƒ¨ï¼‰ |
| `icon` | string | å¦ | æ ‡é¢˜å›¾æ ‡ï¼ˆEmojiï¼‰ |
| `template` | string | âœ… | ä»£ç æ¨¡æ¿ï¼Œä½¿ç”¨ `{{å­—æ®µå}}` ä½œä¸ºå ä½ç¬¦ |
| `steps` | array | âœ… | å‘å¯¼æ­¥éª¤å®šä¹‰åˆ—è¡¨ |

### æ­¥éª¤å­—æ®µ (`steps[]`)

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `field` | string | âœ… | å­—æ®µå˜é‡åï¼Œå¯¹åº”æ¨¡æ¿ä¸­çš„ `{{field}}` |
| `label` | string | âœ… | æ˜¾ç¤ºæ ‡ç­¾ |
| `type` | string | âœ… | è¾“å…¥ç±»å‹ï¼š`number` / `string` / `boolean` / `select` |
| `default` | any | å¦ | é»˜è®¤å€¼ |
| `description` | string | å¦ | å¸®åŠ©è¯´æ˜æ–‡å­— |
| `min` | number | å¦ | æœ€å°å€¼ï¼ˆ`number` ç±»å‹ï¼‰ |
| `max` | number | å¦ | æœ€å¤§å€¼ï¼ˆ`number` ç±»å‹ï¼‰ |
| `step` | number | å¦ | æ­¥è¿›å€¼ï¼ˆ`number` ç±»å‹ï¼‰ |
| `options` | array | å¦ | é€‰é¡¹åˆ—è¡¨ï¼ˆ`select` ç±»å‹ï¼‰ï¼Œæ ¼å¼ï¼š`[{ label: "æ˜¾ç¤º", value: å€¼ }]` |
| `required` | boolean | å¦ | æ˜¯å¦å¿…å¡«ï¼ˆé»˜è®¤ `true`ï¼‰ |

### æ”¯æŒçš„å­—æ®µç±»å‹

| ç±»å‹ | è¾“å…¥æ§ä»¶ | æ¨¡æ¿æ›¿æ¢è§„åˆ™ |
|------|----------|-------------|
| `number` | æ•°å­—è¾“å…¥æ¡† | ç›´æ¥æ›¿æ¢ä¸ºæ•°å­—ï¼Œå¦‚ `50` |
| `string` | æ–‡æœ¬è¾“å…¥æ¡† | æ›¿æ¢ä¸ºåŸå§‹å­—ç¬¦ä¸²ï¼ˆ**ä¸è‡ªåŠ¨åŠ å¼•å·**ï¼Œè¯·åœ¨æ¨¡æ¿ä¸­å†™å¥½å¼•å·ï¼‰ |
| `boolean` | å¤é€‰æ¡† | æ›¿æ¢ä¸º Lua å¸ƒå°”å€¼ `true` æˆ– `false` |
| `select` | ä¸‹æ‹‰é€‰æ‹©æ¡† | æ›¿æ¢ä¸ºé€‰ä¸­å€¼ |

---

## æ¨¡æ¿è¯­æ³•

æ¨¡æ¿ä½¿ç”¨ `{{å˜é‡å}}` ä½œä¸ºå ä½ç¬¦ï¼Œå˜é‡åå¿…é¡»ä¸ `steps` ä¸­çš„ `field` ä¸€ä¸€å¯¹åº”ã€‚

### æ³¨æ„äº‹é¡¹

- **å­—ç¬¦ä¸²å¼•å·**ï¼šæ¨¡æ¿ä¸­çš„ Lua å­—ç¬¦ä¸²éœ€è¦æ‰‹åŠ¨æ·»åŠ å¼•å·ã€‚ä¾‹å¦‚ï¼š`name = "{{name}}"` âœ… è€Œé `name = {{name}}` âŒ
- **å¸ƒå°”å€¼**ï¼š`{{stackable}}` ä¼šè‡ªåŠ¨æ›¿æ¢ä¸º Lua æ ¼å¼çš„ `true` æˆ– `false`
- **å¤šè¡Œæ¨¡æ¿**ï¼šä½¿ç”¨ YAML çš„ `|` è¯­æ³•æ”¯æŒå¤šè¡Œæ¨¡æ¿

### ç¤ºä¾‹

**å•è¡Œæ¨¡æ¿**ï¼š
```yaml
template: |
  { id = {{id}}, name = "{{name}}", attack = {{attack}} }
```

**å¤šè¡Œæ¨¡æ¿**ï¼š
```yaml
template: |
  {
      id = {{id}},
      name = "{{name}}",
      stats = {
          attack = {{attack}},
          defense = {{defense}}
      }
  }
```

---

## æ’å…¥è¡Œä¸º

### `append` æ“ä½œ

å‘å¯¼ä¼šè‡ªåŠ¨ï¼š

1. **è§£æ** ç›®æ ‡ Lua æ–‡ä»¶ï¼Œå®šä½ `target` æŒ‡å®šçš„è¡¨
2. **æ£€æµ‹** ç°æœ‰æ¡ç›®çš„ç¼©è¿›æ ¼å¼
3. **å¤„ç†é€—å·**ï¼šå¦‚æœæœ€åä¸€ä¸ªæ¡ç›®æ²¡æœ‰é€—å·ï¼Œè‡ªåŠ¨è¡¥é€—å·
4. **æ’å…¥** ç”Ÿæˆçš„ä»£ç åˆ°è¡¨çš„æœ«å°¾ï¼ˆ`}` ä¹‹å‰ï¼‰
5. **ä¿æŒ** åŸæœ‰ä»£ç çš„ç¼©è¿›é£æ ¼

### ç¤ºä¾‹

**æ’å…¥å‰**ï¼š
```lua
Weapons = {
    { id = 1001, name = "Wooden Sword", attack = 10 },
    { id = 1002, name = "Iron Sword", attack = 25 }
}
```

**æ’å…¥å**ï¼ˆå¡«å…¥ id=1003, name="Steel Sword", attack=45ï¼‰ï¼š
```lua
Weapons = {
    { id = 1001, name = "Wooden Sword", attack = 10 },
    { id = 1002, name = "Iron Sword", attack = 25 },
    { id = 1003, name = "Steel Sword", attack = 45 }
}
```

---

## å®Œæ•´ç¤ºä¾‹

### å¸¦ä¸‹æ‹‰é€‰æ‹©çš„å‘å¯¼

````markdown
```lua-wizard
file: ./items_config.lua
target: ItemsConfig.Potions
action: append
label: åˆ›å»ºæ–°è¯æ°´
icon: ğŸ§ª
template: |
  { id = {{id}}, name = "{{name}}", effect = "{{effect}}", value = {{value}}, price = {{price}}, stackable = {{stackable}} }
steps:
  - field: id
    label: è¯æ°´ ID
    type: number
    default: 2004
    min: 2001
  - field: name
    label: è¯æ°´åç§°
    type: string
    default: æ–°è¯æ°´
  - field: effect
    label: æ•ˆæœç±»å‹
    type: select
    default: heal
    options:
      - label: æ²»ç–—
        value: heal
      - label: æ³•åŠ›æ¢å¤
        value: mana
      - label: å¢ç›Š
        value: buff
  - field: value
    label: æ•ˆæœæ•°å€¼
    type: number
    default: 100
    min: 1
  - field: price
    label: ä»·æ ¼
    type: number
    default: 50
    min: 0
  - field: stackable
    label: å¯å åŠ 
    type: boolean
    default: true
```
````

---

## UI ç‰¹æ€§

- ğŸ¨ **ä¸»é¢˜é€‚é…**ï¼šè‡ªåŠ¨é€‚é… VS Code çš„æµ…è‰²/æ·±è‰²ä¸»é¢˜
- ğŸ“Š **è¿›åº¦æŒ‡ç¤ºå™¨**ï¼šé¡¶éƒ¨åœ†ç‚¹è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰æ­¥éª¤
- âœ¨ **åŠ¨ç”»æ•ˆæœ**ï¼šæ­¥éª¤åˆ‡æ¢å¸¦æœ‰å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»
- ğŸ‘€ **ä»£ç é¢„è§ˆ**ï¼šæ’å…¥å‰å¯é¢„è§ˆç”Ÿæˆçš„å®Œæ•´ä»£ç 
- âœ… **æˆåŠŸåé¦ˆ**ï¼šæ’å…¥æˆåŠŸåå¡ç‰‡ä¼šæœ‰è„‰å†²é«˜äº®åŠ¨ç”»

---

**Last Updated**: 2026-02-15
